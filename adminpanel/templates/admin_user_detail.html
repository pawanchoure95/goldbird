{% extends 'base.html' %}

{% block title %}User Detail - Admin Dashboard{% endblock %}

{% block content %}
<div class="container mt-5 mb-5">
    <div class="row">
        <div class="col-md-4 mb-4">
            <div class="card profile-card">
                {% if profile.profile_picture %}
                <img src="{{ profile.profile_picture.url }}" alt="Profile" class="profile-image">
                {% else %}
                <div style="width: 150px; height: 150px; border-radius: 50%; background-color: #ccc; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-user fa-5x" style="color: #999;"></i>
                </div>
                {% endif %}
                
                <h3>{{ profile.user.first_name }} {{ profile.user.last_name }}</h3>
                <p class="text-muted">{{ profile.age }} years old</p>
                
                <div class="mb-3">
                    <form method="post" action="{% url 'admin_toggle_user' profile.user.id %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-warning w-100">
                            {% if profile.is_active %}Deactivate{% else %}Activate{% endif %}
                        </button>
                    </form>
                </div>
                
                <form method="post" action="{% url 'admin_delete_user' profile.user.id %}" onsubmit="return confirm('Are you sure?');">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger w-100">Delete User</button>
                </form>
            </div>
        </div>
        
        <div class="col-md-8 mb-4">
            <div class="card">
                <div class="card-body p-4">
                    <h5 class="card-title"><i class="fas fa-user-circle"></i> Account Information</h5>
                    <hr>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p><strong>Name:</strong></p>
                            <p>{{ profile.user.first_name }} {{ profile.user.last_name }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Email:</strong></p>
                            <p>{{ profile.user.email }}</p>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p><strong>Account Status:</strong></p>
                            <p>
                                {% if profile.is_active %}
                                <span class="badge bg-success">Active</span>
                                {% else %}
                                <span class="badge bg-danger">Inactive</span>
                                {% endif %}
                            </p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Member Since:</strong></p>
                            <p>{{ profile.date_created|date:"F d, Y" }}</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card mt-4">
                <div class="card-body p-4">
                    <h5 class="card-title"><i class="fas fa-info-circle"></i> Personal Information</h5>
                    <hr>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p><strong>Gender:</strong></p>
                            <p>{{ profile.get_gender_display }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Age:</strong></p>
                            <p>{{ profile.age }} years</p>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p><strong>Height:</strong></p>
                            <p>{{ profile.height }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Religion:</strong></p>
                            <p>{{ profile.get_religion_display }}</p>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p><strong>Marital Status:</strong></p>
                            <p>{{ profile.get_marital_status_display }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Location:</strong></p>
                            <p>{{ profile.location }}</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card mt-4">
                <div class="card-body p-4">
                    <h5 class="card-title"><i class="fas fa-briefcase"></i> Professional Information</h5>
                    <hr>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p><strong>Occupation:</strong></p>
                            <p>{{ profile.occupation }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Education:</strong></p>
                            <p>{{ profile.education }}</p>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p><strong>Annual Income:</strong></p>
                            <p>{{ profile.income }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Phone:</strong></p>
                            <p>{{ profile.phone }}</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card mt-4">
                <div class="card-body p-4">
                    <h5 class="card-title"><i class="fas fa-heart"></i> About</h5>
                    <hr>
                    <p>{{ profile.bio }}</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="mt-4">
        <a href="{% url 'admin_users' %}" class="btn btn-secondary">Back to Users</a>
    </div>
</div>
{% endblock %}
